<div class="page-container">

  <div class="grid">

    <!-- üõí –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ -->
    <mat-card class="shopping-card">
      <h2 class="section-title">üõí –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h2>

      <form class="add-row">
        <mat-form-field appearance="outline" class="full">
          <mat-label>–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É</mat-label>
          <input matInput [(ngModel)]="newItemName" name="name">
        </mat-form-field>

        <mat-form-field appearance="outline" class="qty">
          <mat-label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</mat-label>
          <input matInput type="number" min="1" [(ngModel)]="newItemQty" name="qty">
        </mat-form-field>

        <mat-form-field appearance="outline" class="unit">
          <mat-label>–û–¥–∏–Ω–∏—Ü—è</mat-label>
          <mat-select [(ngModel)]="newItemUnit" name="unit">
            <mat-option value="pcs">—à—Ç</mat-option>
            <mat-option value="kg">–∫–≥</mat-option>
            <mat-option value="l">–ª</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="date">
          <mat-label>–ü—Ä–∏–¥–∞—Ç–Ω–µ –¥–æ</mat-label>
          <input matInput type="date" [(ngModel)]="newItemExpiry" name="expiry">
        </mat-form-field>

        <mat-form-field appearance="outline" class="price">
          <mat-label>–¶—ñ–Ω–∞</mat-label>
          <input matInput type="number" min="0" [(ngModel)]="newItemPrice" name="price">
        </mat-form-field>

        <button mat-raised-button color="primary" (click)="addShoppingItem()">–î–æ–¥–∞—Ç–∏</button>
      </form>

      <table mat-table [dataSource]="shoppingList.items" class="mat-elevation-z1">

        <ng-container matColumnDef="checked">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let item">
            <mat-checkbox [(ngModel)]="item.checked" (change)="toggleItem(item)"></mat-checkbox>
          </td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>–ù–∞–∑–≤–∞</th>
          <td mat-cell *matCellDef="let item">{{ item.name }}</td>
        </ng-container>

        <ng-container matColumnDef="qty">
          <th mat-header-cell *matHeaderCellDef>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>
          <td mat-cell *matCellDef="let item">{{ item.qty }}</td>
        </ng-container>

        <ng-container matColumnDef="unit">
          <th mat-header-cell *matHeaderCellDef>–û–¥–∏–Ω–∏—Ü—è</th>
          <td mat-cell *matCellDef="let item">{{ item.unit }}</td>
        </ng-container>

        <ng-container matColumnDef="expiry">
          <th mat-header-cell *matHeaderCellDef>–ü—Ä–∏–¥–∞—Ç–Ω–µ –¥–æ</th>
          <td mat-cell *matCellDef="let item">{{ item.expiry }}</td>
        </ng-container>

        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>–¶—ñ–Ω–∞</th>
          <td mat-cell *matCellDef="let item">{{ item.price }}</td>
        </ng-container>

        <ng-container matColumnDef="add">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let item">
            <button mat-icon-button color="primary" (click)="addToInventory(item)">
              <mat-icon>add_shopping_cart</mat-icon>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="remove">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let item; let i = index">
            <button mat-icon-button color="warn" (click)="removeItem(i)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="shoppingColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: shoppingColumns;"></tr>
      </table>
    </mat-card>

    <!-- üè† –©–æ —î –≤–¥–æ–º–∞ -->
    <mat-card class="inventory-card">
      <h2>üè† –©–æ —î –≤–¥–æ–º–∞</h2>

      <table mat-table [dataSource]="inventory" class="mat-elevation-z8">

        <!-- –ù–∞–∑–≤–∞ -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>–ù–∞–∑–≤–∞</th>
          <td mat-cell *matCellDef="let item">{{ item.name }}</td>
        </ng-container>

        <!-- –ö—ñ–ª—å–∫—ñ—Å—Ç—å -->
        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>
          <td mat-cell *matCellDef="let item">
            <input matInput type="number" [(ngModel)]="item.quantity" min="0">
          </td>
        </ng-container>

        <!-- –û–¥–∏–Ω–∏—Ü—è -->
        <ng-container matColumnDef="unit">
          <th mat-header-cell *matHeaderCellDef>–û–¥–∏–Ω–∏—Ü—è</th>
          <td mat-cell *matCellDef="let item">
            <mat-select [(ngModel)]="item.unit">
              <mat-option value="pcs">—à—Ç</mat-option>
              <mat-option value="kg">–∫–≥</mat-option>
              <mat-option value="g">–≥</mat-option>
              <mat-option value="l">–ª</mat-option>
              <mat-option value="ml">–º–ª</mat-option>
            </mat-select>
          </td>
        </ng-container>

        <!-- –ü—Ä–∏–¥–∞—Ç–Ω–µ –¥–æ -->
        <ng-container matColumnDef="expiry">
          <th mat-header-cell *matHeaderCellDef>–ü—Ä–∏–¥–∞—Ç–Ω–µ –¥–æ</th>
          <td mat-cell *matCellDef="let item">
            <input matInput type="date" [(ngModel)]="item.expiry">
          </td>
        </ng-container>

        <!-- –ó–±–µ—Ä–µ–≥—Ç–∏ -->
        <ng-container matColumnDef="edit">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let item">
            <button mat-icon-button color="primary" (click)="updateInventoryItem(item)">
              <mat-icon>save</mat-icon>
            </button>
          </td>
        </ng-container>

        <!-- ‚ùå –í–∏–¥–∞–ª–∏—Ç–∏ -->
        <ng-container matColumnDef="remove">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let item">
            <button mat-icon-button color="warn" (click)="removeInventoryItem(item)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="inventoryColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: inventoryColumns;"></tr>
      </table>
    </mat-card>
  </div>
</div>
